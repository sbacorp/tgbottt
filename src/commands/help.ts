import { MyContext } from '../types';
import { MESSAGES } from '../utils/config';
import logger from '../utils/logger';

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help
 */
export async function handleHelp(ctx: MyContext): Promise<void> {
  try {

    const helpMessageAdmin = `ü§ñ <b>–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –±–æ—Ç–∞</b>\n\n` +
      `<b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n` +
      `/start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞\n` +
      `/menu - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é\n` +
      `/organizations - –°–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π\n` +
      `/add_inn –ò–ù–ù1 –ò–ù–ù2 - –î–æ–±–∞–≤–∏—Ç—å –ò–ù–ù –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è\n` +
      `/check - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é\n` +
      `/check_cbr - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–æ –∑—Å–∫ –¶–ë–†\n` +
      `/status - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã\n` +
      `/help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞\n\n` +
      
      `<b>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n` +
      `/users - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n` +
      `/add_users 123456789 987654321 - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ telegram_id\n` +
      `/remove_users 123456789 987654321 - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ telegram_id\n` +
      `/add_admins 123456789 987654321 - –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ telegram_id\n` +
      `/remove_admins 123456789 987654321 - –£–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ telegram_id\n` +
      `/remove_inn –ò–ù–ù1 –ò–ù–ù2 - –£–¥–∞–ª–∏—Ç—å –ò–ù–ù –∏–∑ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è\n\n` +
      
      `<b>–ü—Ä–∏–º–µ—Ä—ã:</b>\n` +
      `/add_inn 1234567890 1234567891\n` +
      `/check\n` +
      `/check_cbr\n` +
      `/add_users 123456789 987654321\n` +
      `/add_admins 123456789 987654321`;

    const helpMessage = `ü§ñ <b>–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –±–æ—Ç–∞</b>\n\n` +
      `<b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n` +
      `/start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞\n` +
      `/check - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é\n` +
      `/check_cbr - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–æ –∑—Å–∫ –¶–ë–†\n` +
      `/help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞\n\n`;
    
    if (ctx.session.isAdmin) {
      await ctx.reply(helpMessageAdmin, { parse_mode: 'HTML' });
    } else {
      await ctx.reply(helpMessage, { parse_mode: 'HTML' });
    }

  } catch (error) {
    logger.error('Error in handleHelp:', error);
    await ctx.reply(MESSAGES.error);
  }
}
